inputs:
  perguntas:
    type: string
    default: Quantos aparelhos foram comprados?
  diretorio:
    type: string
    default: lab1
outputs:
  resposta:
    type: string
    reference: ${make_question.output}
  nro_pedido:
    type: string
nodes:
- name: retrieve_emails_content
  type: python
  source:
    type: code
    path: retrieve_emails_content.py
  inputs:
    directory: ${inputs.diretorio}
- name: make_questions
  type: llm
  source:
    type: code
    path: rewrite_question.jinja2
  inputs:
    deployment_name: gpt-4-1106
    temperature: 0
    question: ${inputs.perguntas}
    response_format:
      type: text
    context: ${retrieve_emails_content.output}
  connection: openai1704canadaeast
  api: chat
- name: retrieve_number
  type: llm
  source:
    type: code
    path: retrieve_number.jinja2
  inputs:
    deployment_name: gpt-4-1106
    temperature: 0
    max_tokens: 100
    input: ${make_questions.output}
  connection: openai1704canadaeast
  api: chat
