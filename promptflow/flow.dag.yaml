inputs:
  question:
    type: string
    default: Quantos aparelhos foram comprados?
  directory:
    type: string
    default: lab1
outputs:
  answer:
    type: string
    reference: ${make_question.output}
nodes:
- name: retrieve_emails_content
  type: python
  source:
    type: code
    path: retrieve_emails_content.py
  inputs:
    directory: ${inputs.directory}
- name: make_question
  type: llm
  source:
    type: code
    path: rewrite_question.jinja2
  inputs:
    deployment_name: gpt-4-1106
    temperature: 0
    question: ${inputs.question}
    response_format:
      type: text
    context: ${retrieve_emails_content.output}
  connection: openai1704canadaeast
  api: chat
