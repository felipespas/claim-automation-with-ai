inputs:
  questions:
    type: string
    default: Resuma o conte√∫do dos arquivos fornecidos
  directory:
    type: string
    default: "638518876110000000"
outputs:
  answer:
    type: string
    reference: ${make_questions.output}
  validation:
    type: string
    reference: ${validate_product_claim.output}
nodes:
- name: retrieve_emails_content
  type: python
  source:
    type: code
    path: retrieve_emails_content.py
  inputs:
    directory: ${inputs.directory}
- name: make_questions
  type: llm
  source:
    type: code
    path: rewrite_question.jinja2
  inputs:
    deployment_name: gpt-4-1106
    temperature: 0
    question: ${inputs.questions}
    response_format:
      type: text
    context: ${retrieve_emails_content.output}
  connection: openai1704canadaeast
  api: chat
- name: get_order_id
  type: llm
  source:
    type: code
    path: get_order_id.jinja2
  inputs:
    deployment_name: gpt-4-1106
    temperature: 0
    input: ${retrieve_emails_content.output}
  connection: openai1704canadaeast
  api: chat
- name: retrieve_products_list
  type: python
  source:
    type: code
    path: retrieve_products_list.py
  inputs:
    order_id: ${get_order_id.output}
- name: validate_product_claim
  type: llm
  source:
    type: code
    path: validate_product_claim.jinja2
  inputs:
    deployment_name: gpt-4-1106
    products: ${retrieve_products_list.output}
    context: ${retrieve_emails_content.output}
  connection: openai1704canadaeast
  api: chat
